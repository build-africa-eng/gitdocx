FROM africanfuture/windows-devbox-base:latest

# Force PowerShell as default shell
SHELL ["powershell", "-Command"]

# Make a scripts folder and copy script
RUN New-Item -Path C:\\scripts -ItemType Directory -Force
COPY check-space-and-write.ps1 C:\\scripts\\check-space-and-write.ps1

# Run the script via PowerShell
RUN powershell -ExecutionPolicy Bypass -File C:\\scripts\\check-space-and-write.ps1

# Default container entry point
CMD ["powershell.exe"]